{"version":3,"file":"vue","sources":["../src/core/observe/array.js","../src/core/observe/watcher.js","../src/core/observe/dep.js","../src/core/observe/index.js","../src/core/instance/state.js","../src/compiler/html-parser.js","../src/compiler/genetate.js","../src/compiler/index.js","../src/vnode/patch.js","../src/core/instance/lifecycle.js","../src/core/utils/index.js","../src/core/instance/init.js","../src/vnode/index.js","../src/core/global-api/index.js","../src/core/instance/index.js"],"sourcesContent":["// 獲取原來數組原型鏈方法\r\nconst arrayProto = Array.prototype\r\n// 繼承原來的方法\r\nexport const arrayMethods = Object.create(arrayProto)\r\n\r\n// 劫持方法\r\nconst methodsToPatch = [\r\n    'push',\r\n    'pop',\r\n    'shift',\r\n    'unshift',\r\n    'splice',\r\n    'sort',\r\n    'reverse'\r\n]\r\nmethodsToPatch.forEach(method => {\r\n\r\n    arrayMethods[method] = function (...args) {\r\n        // 劫持數組方法\r\n        const result = arrayProto[method].call(this, ...args)\r\n        // 添加的参数\r\n        let inserted\r\n        switch (method) {\r\n            case 'push':inserted = args;\r\n                break;\r\n            case 'unshift':inserted = args;\r\n                break;\r\n            case 'splice':inserted = args.slice(2)\r\n                break;\r\n        }\r\n        if(inserted) {\r\n            this.__ob__.observeArray(inserted)\r\n        }\r\n        this.__ob__.dep.notify()\r\n        return result\r\n    }\r\n})","import {popTarget, pushTarget} from \"./dep\";\r\n\r\nlet id = 0\r\n\r\n// 组成watcher队列\r\nlet queue = []\r\n// 一个组件更新多次，去重\r\nlet has = {}\r\nlet pending = false\r\n\r\nfunction flushSchedulerQueue() {\r\n    let flushQueue = queue.slice(0)\r\n    queue = []\r\n    has = {}\r\n    pending = false\r\n    flushQueue.forEach(q => q.run())\r\n}\r\n\r\nlet callBacks = []\r\nlet waiting = false\r\n\r\nfunction flushCallback() {\r\n    let cbs = callBacks.slice(0)\r\n    waiting = false\r\n    callBacks = []\r\n    cbs.forEach(cb => cb())\r\n}\r\n\r\nlet timerFunc\r\nif(Promise) {\r\n    timerFunc = () => {\r\n        Promise.resolve().then(flushCallback)\r\n    }\r\n} else if(MutationObserver) {\r\n    let observer = new MutationObserver(flushCallback)\r\n    let textNode = document.createTextNode('1')\r\n    observer.observe(textNode,{\r\n        characterData: true\r\n    })\r\n    timerFunc = () => {\r\n        textNode = '2'\r\n    }\r\n} else if(setImmediate) {\r\n    timerFunc = () => {\r\n        setImmediate(flushCallback)\r\n    }\r\n} else {\r\n    timerFunc = () => {\r\n        setTimeout(flushCallback,0)\r\n    }\r\n}\r\n\r\n// vue2源码没有直接使用setTimeout， 使用的优雅降级方式\r\nexport function nextTick(cb) {\r\n    callBacks.push(cb)\r\n    if(!waiting) {\r\n        timerFunc()\r\n        waiting = true\r\n    }\r\n}\r\n\r\nfunction queueWatcher(watcher) {\r\n    let id = watcher.id\r\n    if(!has[id]) {\r\n        queue.push(watcher)\r\n        has[id] = true\r\n        // 不管我们的update执行多少次，只执行一次刷新\r\n        if(!pending) {\r\n            nextTick(flushSchedulerQueue)\r\n            pending = true\r\n        }\r\n    }\r\n}\r\n\r\nclass Watcher {\r\n    constructor(vm, exprOrFn, cb, options) {\r\n        this.id = id++\r\n        this.vm = vm\r\n        this.cb = cb\r\n        this.deps = [] // 存放dep\r\n        this.depsId = new Set() // 存放dep的Id\r\n        this.lazy = options.lazy\r\n        this.dirty = this.lazy // 缓存\r\n        this.user = options.user\r\n        // 判断\r\n        if(typeof exprOrFn === 'function') {\r\n            this.getter = exprOrFn // 更新视图\r\n        } else {\r\n            this.getter = function () {\r\n                return vm[exprOrFn]\r\n            }\r\n        }\r\n        if(!this.lazy){\r\n            this.value = this.get()\r\n        }\r\n    }\r\n    // 添加记录dep,一个属性可能对应多个watcher（一个实例/组件），也需要去重\r\n    addDep(dep) {\r\n        let depId = dep.id\r\n        if(!this.depsId.has(depId)) {\r\n            this.deps.push(dep)\r\n            this.depsId.add(depId)\r\n            // 让dep记录watcher\r\n            dep.addSub(this)\r\n        }\r\n    }\r\n    evaluate() {\r\n        // 获取用户函数返回值\r\n        this.value = this.get()\r\n        this.dirty = false\r\n    }\r\n    // 初次渲染\r\n    get() {\r\n        pushTarget(this)\r\n        let value = this.getter.call(this.vm)\r\n        popTarget()\r\n        return value\r\n    }\r\n    depend() {\r\n        let i = this.deps.length\r\n        while (i--) {\r\n            this.deps[i].depend()\r\n        }\r\n    }\r\n    update() {\r\n        if(this.lazy) {\r\n            this.dirty = true\r\n        } else {\r\n            queueWatcher(this)\r\n        }\r\n        // this.getter()\r\n    }\r\n    run() {\r\n        let newValue = this.get()\r\n        let oldValue = this.value\r\n        if(this.user) {\r\n            this.cb.call(this.vm, newValue, oldValue)\r\n        }\r\n    }\r\n}\r\n\r\nexport default Watcher","import watcher from \"./watcher\";\r\n\r\nlet id = 0\r\nclass Dep {\r\n    constructor() {\r\n        this.id = id++\r\n        this.subs = [] // watcher数组\r\n    }\r\n    depend() {\r\n        // this.subs.push(Dep.target)\r\n        // 页面使用相同的数据时，由于每次get()都会添加watcher，所以需要去重：先让watcher记住dep，同时去重，再在watcher中调用addSub\r\n        // watcher记录dep，Dep.target此时是watcher，this是dep\r\n        Dep.target.addDep(this)\r\n    }\r\n    addSub(watcher) {\r\n        this.subs.push(watcher)\r\n    }\r\n    notify() {\r\n        // this.subs.forEach(watcher => watcher.getter())\r\n        this.subs.forEach(watcher => watcher.update())\r\n    }\r\n}\r\nDep.target = null\r\nlet stack = []\r\n// 添加watcher到dep的全局target变量\r\nexport function pushTarget(watcher) {\r\n    stack.push(watcher)\r\n    Dep.target = watcher\r\n}\r\n// 清空\r\nexport function popTarget() {\r\n    stack.pop()\r\n    Dep.target = stack[stack.length -1]\r\n}\r\nexport default Dep","import {arrayMethods} from \"./array\";\r\nimport Dep from \"./dep\"\r\n\r\nfunction dependArray(value) {\r\n    for(let i = 0,l = value.length; i < l; i++) {\r\n        let current = value[i]\r\n        current.__ob__ && current.__ob__.dep.depend()\r\n        if(Array.isArray(current)) {\r\n            dependArray(current)\r\n        }\r\n    }\r\n}\r\n\r\nfunction defineReactive(data, key) {\r\n    let value = data[key]\r\n    // 深度代理，檢測每一個屬性\r\n    let childOb = observe(value)\r\n    // 给每个属性添加dep\r\n    let dep = new Dep()\r\n    // 實現劫持\r\n    Object.defineProperty(data, key, {\r\n        get() {\r\n            if(Dep.target) {\r\n                // dep记住当前的watcher\r\n                dep.depend()\r\n                if(childOb) {\r\n                    childOb.dep.depend() // 让数组和对象本身也记住当前的watcher\r\n                    if(Array.isArray(value)) {\r\n                        dependArray(value)\r\n                    }\r\n                }\r\n            }\r\n            return value\r\n        },\r\n        set(newValue) {\r\n            if(data[key] === newValue) return\r\n            value = newValue\r\n            dep.notify()\r\n        }\r\n    })\r\n}\r\n\r\nclass Observer {\r\n    constructor(data) {\r\n        // 给每个对象或者数组添加watcher（用于数组监听数组方法和对象新增的属性）\r\n        this.dep = new Dep()\r\n        Object.defineProperty(data, '__ob__', {\r\n            value: this,\r\n            enumerable: false,\r\n            writable: true,\r\n            configurable: true,\r\n        })\r\n        if(Array.isArray(data)) {\r\n            // 數組類型：方法劫持\r\n            data.__proto__ = arrayMethods\r\n            // 可能是数组对象/多维数组：循环数组判断\r\n            this.observeArray(data)\r\n        } else {\r\n            // 對象類型：循環對象，給每一個屬性添加劫持\r\n            let keys = Object.keys(data)\r\n            for(let i = 0; i < keys.length; i ++) {\r\n                let key = keys[i]\r\n                defineReactive(data, key)\r\n            }\r\n        }\r\n    }\r\n    observeArray(data) {\r\n        for(let i = 0, l = data.length; i < l; i ++) {\r\n            observe(data[i])\r\n        }\r\n    }\r\n}\r\n\r\nexport function observe(data) {\r\n    // 只有數組或者對象才進行觀測\r\n    if(Array.isArray(data) || (Object.prototype.toString.call(data) === '[object Object]')) {\r\n        return new Observer(data)\r\n    }\r\n}","import {observe} from \"../observe/index\";\r\nimport Watcher from \"../observe/watcher\";\r\nimport Dep from \"../observe/dep\";\r\n\r\nconst sharedPropertyDefinition = {\r\n    enumerable: true,\r\n    configurable: true,\r\n    get: {},\r\n    set: {}\r\n}\r\n\r\nfunction proxy(target, sourceKey, key) {\r\n    sharedPropertyDefinition.get = function proxyGetter() {\r\n        return this[sourceKey][key]\r\n    }\r\n    sharedPropertyDefinition.set = function proxyGetter(newValue) {\r\n        this[sourceKey][key] = newValue\r\n    }\r\n    Object.defineProperty(target, key, sharedPropertyDefinition)\r\n}\r\n\r\nfunction initData(vm) {\r\n    let data = vm.$options.data\r\n    // data.call(vm) 改变this指向\r\n    data = vm._data = typeof data === 'function' ? data.call(vm) : data\r\n    // 将data挂载在vm上\r\n    const keys = Object.keys(data)\r\n    let i = keys.length\r\n    while(i--) {\r\n        proxy(vm, '_data', keys[i])\r\n    }\r\n    // 劫持data数据\r\n    observe(data)\r\n}\r\n\r\nfunction createComputedGetter(key) {\r\n    return function () {\r\n        // 获取对应属性watcher\r\n        const watcher = this._computedWatchers[key]\r\n        if(watcher.dirty) {\r\n            watcher.evaluate()\r\n        }\r\n        // 计算属性watcher出栈后，获取渲染watcher\r\n        if(Dep.target) {\r\n            watcher.depend()\r\n        }\r\n        return watcher.value\r\n    };\r\n}\r\n\r\n// 可以通过实例拿到对应的属性\r\nfunction defineComputed(target, key, setter) {\r\n    Object.defineProperty(target, key, {\r\n        get: createComputedGetter(key),\r\n        set: setter\r\n    })\r\n}\r\n\r\nfunction initComputed(vm) {\r\n    let computed = vm.$options.computed\r\n    let keys = Object.keys(computed)\r\n    let watcher = vm._computedWatchers = {}\r\n    for(let i = 0,l = keys.length; i < l; i ++) {\r\n        let userDef = computed[keys[i]]\r\n        const getter = typeof userDef === 'function' ? userDef : userDef.get\r\n        const setter = userDef.set || (() => {})\r\n        // 添加watcher\r\n        watcher[keys[i]] = new Watcher(vm, getter, '',{lazy: true})\r\n        defineComputed(vm, keys[i], setter)\r\n    }\r\n}\r\n\r\nfunction createWatch(vm, key, handlerElement) {\r\n    // 字符串 函数 （对象暂不考虑）\r\n    if(typeof handlerElement === 'string') {\r\n        handlerElement = vm[handlerElement]\r\n    }\r\n    return vm.$watch(key, handlerElement)\r\n}\r\n\r\nfunction initWatch(vm) {\r\n    let watch = vm.$options.watch\r\n    for(let key in watch) { // 字符串 数组 函数\r\n        const handler = watch[key]\r\n        if(Array.isArray(handler)) {\r\n            for (let i = 0; i < handler.length; i ++) {\r\n                createWatch(vm, key, handler[i])\r\n            }\r\n        } else {\r\n            createWatch(vm, key, handler)\r\n        }\r\n    }\r\n}\r\n\r\nexport function initState(vm) {\r\n    const ops = vm.$options\r\n    if(ops.data) {\r\n        initData(vm)\r\n    }\r\n    if(ops.computed) {\r\n        initComputed(vm)\r\n    }\r\n    if(ops.watch) {\r\n        initWatch(vm)\r\n    }\r\n}\r\n","const attribute =\r\n    /^\\s*([^\\s\"'<>\\/=]+)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst dynamicArgAttribute =\r\n    /^\\s*((?:v-[\\w-]+:|@|:|#)\\[[^=]+?\\][^\\s\"'<>\\/=]*)(?:\\s*(=)\\s*(?:\"([^\"]*)\"+|'([^']*)'+|([^\\s\"'=<>`]+)))?/\r\nconst ncname = `[a-zA-Z_][\\\\-\\\\.0-9_a-zA-Z]*`\r\nconst qnameCapture = `((?:${ncname}\\\\:)?${ncname})`\r\nconst startTagOpen = new RegExp(`^<${qnameCapture}`)\r\nconst startTagClose = /^\\s*(\\/?)>/\r\nconst endTag = new RegExp(`^<\\\\/${qnameCapture}[^>]*>`)\r\nconst doctype = /^<!DOCTYPE [^>]+>/i\r\n// #7298: escape - to avoid being passed as HTML comment when inlined in page\r\nconst comment = /^<!\\--/\r\nconst conditionalComment = /^<!\\[/\r\n\r\nexport function parseHTML(html) {\r\n    // 删除\r\n    function advance(index) {\r\n        html = html.substring(index)\r\n    }\r\n\r\n    // 解析开始标签\r\n    function parseStartTag() {\r\n        // 返回结果或者false\r\n        const start = html.match(startTagOpen)\r\n        let match\r\n        if(start) {\r\n            match = {\r\n                tagName: start[1],\r\n                attrs: []\r\n            }\r\n            // 删除开始标签\r\n            advance(start[0].length)\r\n            // 遍历开始标签的属性\r\n            let attr\r\n            let end\r\n            // 不为结束'<'，且有属性\r\n            while (!(end = html.match(startTagClose)) && (attr = html.match(attribute))) {\r\n                match.attrs.push({\r\n                    name: attr[1],\r\n                    value: attr[3] || attr[4] || attr[5]\r\n                })\r\n                advance(attr[0].length)\r\n            }\r\n            if(end) {\r\n                advance(end[0].length)\r\n                return match\r\n            }\r\n        }\r\n    }\r\n\r\n    function createASTElement(tag, attrs) {\r\n        return {\r\n            tag,\r\n            attrs,\r\n            children: [],\r\n            type: 1,\r\n            parent: null\r\n        }\r\n    }\r\n    let root\r\n    let createParent\r\n    let stack = []\r\n    function start(tagName, attrs) {\r\n        let element = createASTElement(tagName, attrs)\r\n        if(!root) {\r\n            root = element\r\n        }\r\n        createParent = element\r\n        stack.push(element)\r\n    }\r\n\r\n    function charts(text) {\r\n        text = text.replace(/\\s/g, '')\r\n        if(text) {\r\n            createParent.children.push({\r\n                type: 3,\r\n                text\r\n            })\r\n        }\r\n    }\r\n\r\n    function end(tag) {\r\n        let element = stack.pop()\r\n        createParent = stack[stack.length -1]\r\n        if(createParent) {\r\n            element.parent = createParent.tag\r\n            createParent.children.push(element)\r\n        }\r\n    }\r\n\r\n    // 遍历html字符串开始解析\r\n    while (html) {\r\n        // 判断标签\r\n        let textEnd = html.indexOf('<')\r\n        // 是一个标签,两种情况 ：开始标签、结束标签\r\n        if(textEnd === 0) {\r\n            // 开始标签\r\n            const startTagMatch = parseStartTag()\r\n            if(startTagMatch) {\r\n                start(startTagMatch.tagName, startTagMatch.attrs)\r\n                continue\r\n            }\r\n            // 结束标签\r\n            const endTagMatch = html.match(endTag)\r\n            if(endTagMatch) {\r\n                advance(endTagMatch[0].length)\r\n                end(endTagMatch[1])\r\n                continue\r\n            }\r\n        }\r\n        // 是文本\r\n        if(textEnd > 0) {\r\n            // 获取文本内容\r\n            let text = html.substring(0, textEnd)\r\n            if(text) {\r\n                advance(text.length)\r\n                charts(text)\r\n            }\r\n        }\r\n    }\r\n    return root\r\n}","//  处理属性\r\nconst defaultTagRE = /\\{\\{((?:.|\\r?\\n)+?)\\}\\}/g\r\nfunction genProps(attrs) {\r\n    let str = ''\r\n    for (let i = 0,l = attrs.length; i < l; i++) {\r\n        let attr = attrs[i]\r\n        if(attr.name === 'style') {\r\n            let obj = {}\r\n            // ['color: red', 'font-size: 30px']\r\n            attr.value.split(';').forEach(item => {\r\n                // ['color', 'red']\r\n                let [key, value] = item.split(':')\r\n                obj[key] = value\r\n            })\r\n            attr.value = obj\r\n        }\r\n        str += `${attr.name}:${JSON.stringify(attr.value)},`\r\n    }\r\n    return `{${str.slice(0,-1)}}`\r\n}\r\n\r\n// 元素或者文本\r\nfunction gen(child) {\r\n    if(child.type === 1) { // 元素\r\n        return generate(child)\r\n    }\r\n    if(child.type === 3) { // 文本\r\n        let text = child.text\r\n        if(!defaultTagRE.test(text)) {\r\n            return `_v(${JSON.stringify(text)})`\r\n        }\r\n        let tokens = []\r\n        let lastIndex = defaultTagRE.lastIndex = 0\r\n        let match\r\n        while(match = defaultTagRE.exec(text)) {\r\n            let index = match.index\r\n            if(index > lastIndex) { // 添加文本内容\r\n                tokens.push(JSON.stringify(text.slice(lastIndex,index)))\r\n            }\r\n            tokens.push(`_s(${match[1].trim()})`)\r\n            lastIndex = index + match[0].length\r\n        }\r\n        if(lastIndex < text.length) {\r\n            tokens.push(JSON.stringify(text.slice(lastIndex)))\r\n        }\r\n        return `_v(${tokens.join('+')})`\r\n    }\r\n}\r\n\r\n// 处理子节点\r\nfunction genChildren(el) {\r\n    let children = el.children\r\n    if(children.length) {\r\n        return children.map(child => gen(child)).join(',')\r\n    }\r\n}\r\n\r\nexport function generate(el) {\r\n    let children = genChildren(el)\r\n    return `_c('${el.tag}',${el.attrs.length ? genProps(el.attrs) : 'undefined'}${el.children.length ? `,${children}` : ''})`\r\n}","import {parseHTML} from \"./html-parser\";\r\nimport {generate} from \"./genetate\";\r\n\r\nexport function compileToFunctions(template) {\r\n    // 将html变成ast语法树\r\n    let ast = parseHTML(template)\r\n    // ast变成字符串 =》 变成render函数\r\n    let code = generate(ast)\r\n    let render = new Function(`with(this){return ${code}}`)\r\n    // 将render函数 变成虚拟dom\r\n    return render\r\n}","function patchProps(el, oldProps = {}, props = {}) {\r\n    // 老有新无 删除老的\r\n    let oldStyle = oldProps.style || {}\r\n    let newStyle = props.style || {}\r\n    for(let key in oldStyle) {\r\n        if(!newStyle[key]) {\r\n            el.style[key] = ''\r\n        }\r\n    }\r\n    for(let key in oldProps) {\r\n        if(!props[key]) {\r\n            el.removeAttribute(key)\r\n        }\r\n    }\r\n    for(let key in props) {\r\n        if(key === 'style') {\r\n            for(let styleName in props.style) {\r\n                el.style[styleName] = props.style[styleName]\r\n            }\r\n        } else {\r\n            el.setAttribute(key, props[key])\r\n        }\r\n    }\r\n}\r\n\r\nexport function createEl(vnode) {\r\n    // 解析\r\n    let {tag, data, key, children, text} = vnode\r\n    if(typeof tag === 'string') {\r\n        vnode.el = document.createElement(tag) // 创建元素\r\n        patchProps(vnode.el, {}, data)\r\n        if(children.length) {\r\n            for(let i = 0,l = children.length; i < l; i++) {\r\n                vnode.el.appendChild(createEl(children[i]))\r\n            }\r\n        }\r\n    } else {\r\n        vnode.el = document.createTextNode(text)\r\n    }\r\n    return vnode.el\r\n}\r\n\r\nfunction isSameVnode(oldVnode, vnode) {\r\n    return oldVnode.tag === vnode.tag && oldVnode.key === vnode.key\r\n}\r\n\r\nfunction mountChildren(el, newChildren) {\r\n    for(let i = 0; i < newChildren.length; i ++) {\r\n        let child = newChildren[i]\r\n        el.appendChild(createEl(child))\r\n    }\r\n}\r\n\r\nfunction updateChildren(el, oldChildren, newChildren) {\r\n    let oldStartIndex = 0\r\n    let newStartIndex = 0\r\n    let oldEndIndex = oldChildren.length - 1\r\n    let newEndIndex = newChildren.length - 1\r\n\r\n    let oldStartVnode = oldChildren[0]\r\n    let newStartVnode = newChildren[0]\r\n    let oldEndVnode = oldChildren[oldEndIndex]\r\n    let newEndVnode = newChildren[newEndIndex]\r\n\r\n    while (oldStartIndex <= oldEndIndex && newStartIndex <= newEndIndex) {\r\n        // 比较第一个节点是否相同\r\n        if(isSameVnode(oldStartVnode, newStartVnode)) {\r\n            patchVnode(oldStartVnode, newStartVnode) // 如果是相同节点，则递归比较子节点\r\n            oldStartVnode = oldChildren[++oldStartIndex]\r\n            newStartVnode = newChildren[++newStartIndex]\r\n            continue\r\n        }\r\n        // 比较倒数第一个节点是否相同\r\n        if(isSameVnode(oldEndVnode, newEndVnode)) {\r\n            patchVnode(oldEndVnode, newEndVnode) // 如果是相同节点，则递归比较子节点\r\n            oldEndVnode = oldChildren[--oldEndIndex]\r\n            newEndVnode = newChildren[--newEndIndex]\r\n            continue\r\n        }\r\n        // 交叉比对, 老的最后一个和新的第一个相同\r\n        if(isSameVnode(oldEndVnode, newStartVnode)) {\r\n            patchVnode(oldEndVnode, newStartVnode)\r\n            el.insertBefore(oldEndVnode.el, oldStartVnode.el) // 将老的最后一个移动到前面\r\n            oldEndVnode = oldChildren[--oldEndIndex]\r\n            newStartVnode = newChildren[++newStartIndex]\r\n            continue\r\n        }\r\n        // 交叉对比，老的第一个和新的第一个相同\r\n        if(isSameVnode(oldStartVnode, newEndVnode)) {\r\n            patchVnode(oldStartVnode, newEndVnode)\r\n            el.insertBefore(oldStartVnode.el, oldEndVnode.el.nextSibling)\r\n            oldStartVnode = oldChildren[++oldStartIndex]\r\n            newEndVnode = newChildren[--newEndIndex]\r\n            continue\r\n        }\r\n    }\r\n    // 如果循环结束，新children的头指针和尾指针之间还有节点，则是新增的需要插入\r\n    if(newStartIndex <= newEndIndex) {\r\n        for(let i = newStartIndex; i <= newEndIndex; i++) {\r\n            let childEl = createEl(newChildren[i])\r\n            let anchor = newChildren[newEndIndex + 1] ?\r\n                newChildren[newEndIndex + 1].el :\r\n                null // anchor相当于一个参照物，如果是从尾指针向前比较的unshift，则newEndIndex的下一个肯定是有值\r\n            el.insertBefore(childEl, anchor) // anchor为null，说明是push，即appendChild\r\n        }\r\n    }\r\n    // 如果循环结束，老的children的头指针和尾指针之间还有节点， 则是多余的需要删除\r\n    if(oldStartIndex <= oldEndIndex) {\r\n        for(let i = oldStartIndex; i <= oldEndIndex; i ++) {\r\n            let childEl = oldChildren[i].el\r\n            el.removeChild(childEl)\r\n        }\r\n    }\r\n\r\n}\r\n\r\nfunction patchVnode(oldVnode, vnode) {\r\n    if(isSameVnode(oldVnode, vnode)) {\r\n        let el = vnode.el = oldVnode.el // 复用老节点标签\r\n        // 文本情况\r\n        if(!oldVnode.tag) {\r\n            if(oldVnode.text !== vnode.text) {\r\n                oldVnode.el.textContent = vnode.text // 用新文本覆盖\r\n            }\r\n        }\r\n        // 标签情况\r\n        patchProps(el, oldVnode.data, vnode.data) // 先对比属性\r\n        let oldChildren = oldVnode.children || []\r\n        let newChildren = vnode.children || []\r\n        if(oldChildren.length && newChildren.length) { // 再对比子节点\r\n            // 对比两个子节点\r\n            updateChildren(el, oldChildren, newChildren)\r\n        } else if(newChildren.length) {\r\n            // 新有老无 新增\r\n            mountChildren(el, newChildren)\r\n        } else if(oldChildren.length) {\r\n            // 老有新无 删除\r\n            el.innerHTML = '' // 有组件可能也会删除\r\n        }\r\n        return el\r\n    } else {\r\n        let el = createEl(vnode)\r\n        oldVnode.el.parentNode.replaceChild(el, oldVnode.el)\r\n        return el\r\n    }\r\n}\r\n\r\nexport function patch(oldVnode, vnode) {\r\n    const isRealElement = oldVnode.nodeType\r\n    // 初次渲染\r\n    if(isRealElement) {\r\n        let el = createEl(vnode)\r\n        let parentEl = oldVnode.parentNode\r\n        parentEl.insertBefore(el, oldVnode.nextSibling)\r\n        parentEl.removeChild(oldVnode)\r\n        return el\r\n    } else { // diff算法\r\n        // 判断两个节点是不是同一个节点，不一样直接删除老的，替换新的；一样比较两个节点属性（平级比较）\r\n        // 节点比较完后，比较两个节点children\r\n        return patchVnode(oldVnode, vnode)\r\n    }\r\n\r\n}","import {patch} from \"../../vnode/patch\";\r\nimport Watcher from \"../observe/watcher\";\r\n\r\nexport function mountComponent(vm, el) {\r\n    // _render 将render函数变成虚拟dom\r\n    // _update 将虚拟dom变成真实dom，放到页面\r\n    callHook(vm, 'beforeMounted')\r\n    let updateComponent = () => {\r\n        vm._update(vm._render())\r\n    }\r\n    let watcher = new Watcher(vm, updateComponent, ()=>{}, true)\r\n    callHook(vm, 'mounted')\r\n}\r\n\r\nexport function lifecycleMixin(vue) {\r\n    vue.prototype._update = function (vnode) {\r\n        let vm = this\r\n        /*\r\n        * $el 旧的dom\r\n        * vnode 虚拟dom\r\n        * */\r\n        vm.$el = patch(vm.$el, vnode)\r\n    }\r\n}\r\n\r\n// 生命周期调用\r\nexport function callHook(vm, hook) {\r\n    const handler = vm.$options[hook]\r\n    if(handler) {\r\n        for(let i = 0, l = handler.length; i < l; i++) {\r\n            handler[i].call(this) // 改变生命周期this指向\r\n        }\r\n    }\r\n}","export const HOOKS = [\r\n    \"beforeCreate\",\r\n    \"created\",\r\n    \"beforeMount\",\r\n    \"mounted\",\r\n    \"beforeUpdate\",\r\n    \"updated\",\r\n    \"beforeDestroy\",\r\n    \"destroyed\",\r\n]\r\nlet starts = {}\r\n// starts.data = function (parentVal, childVal){\r\n//     return childVal\r\n// }\r\n// starts.computed = function (){}\r\n// starts.watch = function (){}\r\n// starts.methods = function (){}\r\n\r\nfunction mergeHooks(parentVal, childVal) {\r\n    if(childVal) {\r\n        if(parentVal) {\r\n            return parentVal.concat(childVal)\r\n        } else {\r\n            return [childVal] // [a]\r\n        }\r\n    } else {\r\n        return parentVal\r\n    }\r\n}\r\n\r\n// 遍历生命周期\r\nHOOKS.forEach(hooks =>{\r\n    starts[hooks] = mergeHooks\r\n})\r\nexport function mergeOptions(parent, child) {\r\n    const options = {}\r\n    // 合并属性\r\n    function mergeField(key) {\r\n        if(starts[key]) {\r\n            starts[key](parent[key], child[key])\r\n        } else {\r\n            options[key] = child[key] || parent[key]\r\n        }\r\n    }\r\n\r\n    for(let key in parent) {\r\n        mergeField(key)\r\n    }\r\n    for(let key in child) {\r\n        if(!parent.hasOwnProperty(key)) {\r\n            mergeField(key)\r\n        }\r\n    }\r\n    return options\r\n}","import {initState} from \"./state\";\r\nimport {compileToFunctions} from \"../../compiler/index\";\r\nimport {callHook, mountComponent} from \"./lifecycle\";\r\nimport {mergeOptions} from \"../utils/index\";\r\n\r\nexport function initMixin(Vue) {\r\n    Vue.prototype._init = function (options) {\r\n        const vm = this\r\n        vm.$options = mergeOptions(this.constructor.options, options)\r\n        callHook(vm, 'beforeCreated')\r\n        // 初始化状态(包含props、data、methods、computed、watch)\r\n        initState(vm);\r\n        callHook(vm, 'created')\r\n        // 創建mount\r\n        if(vm.$options.el) {\r\n            vm.$mount(vm.$options.el)\r\n        }\r\n    }\r\n    Vue.prototype.$mount = function (el) {\r\n        const vm = this\r\n        let options = vm.$options\r\n        el = document.querySelector(el)\r\n        vm.$el = el\r\n        if(!options.render) {\r\n            if(options.template) {\r\n                // nothing\r\n            } else if(el){\r\n                // 獲取掛載點的html\r\n                let template = el.outerHTML\r\n                // render函数\r\n                let render = compileToFunctions(template)\r\n                // 将render函数变成虚拟dom =》 真实dom\r\n                options.render = render\r\n            }\r\n        }\r\n        // 挂载组件\r\n        mountComponent(vm,el)\r\n    }\r\n}\r\n","function vnode(tag, data, key, children, text) {\r\n    return {\r\n        tag,\r\n        data,\r\n        key,\r\n        children,\r\n        text\r\n    }\r\n}\r\n\r\nfunction createElement(tag, data = {}, ...children) {\r\n    return vnode(tag, data, data.key, children)\r\n}\r\n\r\nfunction createText(text) {\r\n    return vnode(undefined, undefined,undefined,undefined, text)\r\n}\r\n\r\nexport function renderMixin(vue) {\r\n    vue.prototype._c = function () { // 标签\r\n        return createElement(...arguments)\r\n    }\r\n    vue.prototype._v = function (text) { // 文本\r\n        return createText(text)\r\n    }\r\n    vue.prototype._s = function (val) { // 变量\r\n        return val == null ? \"\" : typeof val === 'object' ? JSON.stringify(val) : val\r\n    }\r\n    vue.prototype._render = function () {\r\n        let vm = this\r\n        let render = vm.$options.render\r\n        let vnode = render.call(vm)\r\n        return vnode\r\n    }\r\n}","import {mergeOptions} from \"../utils/index\";\r\n\r\nexport function initGlobalApi(Vue) {\r\n    Vue.options = {}\r\n    Vue.Mixin = function (mixin) {\r\n        this.options = mergeOptions(this.options, mixin)\r\n    }\r\n}","import {initMixin} from \"./init\";\r\nimport {lifecycleMixin} from \"./lifecycle\";\r\nimport {renderMixin} from \"../../vnode/index\";\r\nimport {initGlobalApi} from \"../global-api/index\";\r\nimport Watcher, {nextTick} from \"../observe/watcher\";\r\nimport {compileToFunctions} from \"../../compiler/index\";\r\nimport {createEl, patch} from \"../../vnode/patch\";\r\n\r\nfunction Vue(options) {\r\n    this._init(options)\r\n}\r\nVue.prototype.$nextTick = nextTick\r\nVue.prototype.$watch = function (exprOrFn, cb) {\r\n    new Watcher(this, exprOrFn, cb, { user: true })\r\n}\r\ninitMixin(Vue)\r\nlifecycleMixin(Vue) // 添加生命周期\r\nrenderMixin(Vue) // 添加_render方法\r\ninitGlobalApi(Vue)\r\n\r\nsetTimeout(() =>{\r\n    let render1 = compileToFunctions(`<ul key=\"t\" style=\"color: red\">\r\n        <li key=\"a\">a</li>\r\n        <li key=\"b\">b</li>\r\n        <li key=\"c\">c</li>\r\n        <li key=\"d\">d</li>\r\n    </ul>`)\r\n    let vm1 = new Vue({data: {name: '杨'}})\r\n    let preVnode = render1.call(vm1)\r\n    let el1 = createEl(preVnode)\r\n    document.body.appendChild(el1)\r\n\r\n    let render2 = compileToFunctions(`<ul key=\"t\" style=\"color: green\">   \r\n        <li key=\"d\">d</li>    \r\n        <li key=\"c\">c</li>\r\n        <li key=\"b\">b</li>\r\n        <li key=\"a\">a</li>\r\n    </ul>`)\r\n    let vm2 = new Vue({data: {name: '杨'}})\r\n    let nextVnode = render2.call(vm2)\r\n\r\n// 不直接替换真实节点，而是比较他们之间的差异再生成真实dom\r\n    setTimeout(() =>{\r\n        patch(preVnode, nextVnode)\r\n    },3000)\r\n},500)\r\n\r\n\r\n\r\nexport default Vue"],"names":["arrayProto","Array","prototype","arrayMethods","Object","create","methodsToPatch","forEach","method","_arrayProto$method","_len","arguments","length","args","_key","result","call","apply","concat","inserted","slice","__ob__","observeArray","dep","notify","id","queue","has","pending","flushSchedulerQueue","flushQueue","q","run","callBacks","waiting","flushCallback","cbs","cb","timerFunc","Promise","resolve","then","MutationObserver","observer","textNode","document","createTextNode","observe","characterData","setImmediate","setTimeout","nextTick","push","queueWatcher","watcher","Watcher","vm","exprOrFn","options","_classCallCheck","deps","depsId","Set","lazy","dirty","user","getter","value","get","_createClass","key","addDep","depId","add","addSub","evaluate","pushTarget","popTarget","depend","i","update","newValue","oldValue","Dep","subs","target","stack","pop","dependArray","l","current","isArray","defineReactive","data","childOb","defineProperty","set","Observer","enumerable","writable","configurable","__proto__","keys","toString","sharedPropertyDefinition","proxy","sourceKey","proxyGetter","initData","$options","_data","createComputedGetter","_computedWatchers","defineComputed","setter","initComputed","computed","userDef","createWatch","handlerElement","$watch","initWatch","watch","handler","initState","ops","attribute","ncname","qnameCapture","startTagOpen","RegExp","startTagClose","endTag","parseHTML","html","advance","index","substring","parseStartTag","start","match","tagName","attrs","attr","end","name","createASTElement","tag","children","type","parent","root","createParent","element","charts","text","replace","textEnd","indexOf","startTagMatch","endTagMatch","defaultTagRE","genProps","str","_loop","obj","split","item","_item$split","_item$split2","_slicedToArray","JSON","stringify","gen","child","generate","test","tokens","lastIndex","exec","trim","join","genChildren","el","map","compileToFunctions","template","ast","code","render","Function","patchProps","oldProps","undefined","props","oldStyle","style","newStyle","removeAttribute","styleName","setAttribute","createEl","vnode","createElement","appendChild","isSameVnode","oldVnode","mountChildren","newChildren","updateChildren","oldChildren","oldStartIndex","newStartIndex","oldEndIndex","newEndIndex","oldStartVnode","newStartVnode","oldEndVnode","newEndVnode","patchVnode","insertBefore","nextSibling","childEl","anchor","removeChild","textContent","innerHTML","parentNode","replaceChild","patch","isRealElement","nodeType","parentEl","mountComponent","callHook","updateComponent","_update","_render","lifecycleMixin","vue","$el","hook","HOOKS","starts","mergeHooks","parentVal","childVal","hooks","mergeOptions","mergeField","hasOwnProperty","initMixin","Vue","_init","constructor","$mount","querySelector","outerHTML","createText","renderMixin","_c","_v","_s","val","_typeof","initGlobalApi","Mixin","mixin","$nextTick","render1","vm1","preVnode","el1","body","render2","vm2","nextVnode"],"mappings":"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"}